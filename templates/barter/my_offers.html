{% extends "barter/base.html" %}
{% block title %}–û–±–º–µ–Ω{% endblock %}
{% block content %}

{% load static %}
<style>
  .post-detail-image {
    width: 100%;
    max-height: 400px;
    object-fit: cover;
    border-radius: 0.5rem;
  }

  .post-meta {
    color: #6c757d;
    font-size: 0.9rem;
  }

  .post-content {
    margin-top: 1rem;
    white-space: pre-line;
  }
</style>

<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">

          <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="{% url 'barter:home' %}">–ì–ª–∞–≤–Ω–∞—è</a></li>
              <li class="breadcrumb-item active" aria-current="page">–û–±–º–µ–Ω</li>
            </ol>
          </nav>

          <h2>–ú–æ–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è</h2>

          <form method="get" class="mb-4">
            <div class="row g-3">
                <div class="col-md-4">
                    {{ form.status.label_tag }}
                    {{ form.status }}
                </div>
            </div>
            <button type="submit" class="btn btn-primary mt-3">–§–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å</button>
          </form>

          <h3>üì§ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ</h3>
          <ul>
            {% for offer in outgoing %}
              <li>
                –í—ã –ø—Ä–µ–¥–ª–æ–∂–∏–ª–∏ –æ–±–º–µ–Ω—è—Ç—å
                <a href="{{ offer.ad_sender_id.get_absolute_url }}" class="text-dark">
                  <strong>{{ offer.ad_sender_id.title }}</strong>
                </a>
                –Ω–∞ 
                <a href="{{ offer.ad_receiver_id.get_absolute_url }}" class="text-dark">
                  <strong>{{ offer.ad_receiver_id.title }}</strong>
                </a>
                ‚Äî –°—Ç–∞—Ç—É—Å: {{ offer.get_status_display }}
                {% if offer.status == 'WAIT' %}
                  <a href="{% url 'barter:reject_offer' offer.id %}">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</a>
                {% endif %}
              </li>
            {% empty %}
              <li>–ù–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π</li>
            {% endfor %}
          </ul>

          <h3>üì• –ü–æ–ª—É—á–µ–Ω–Ω—ã–µ</h3>
          <ul>
            {% for offer in incoming %}
              <li>
                <strong>{{ offer.ad_sender_id.author.username }}</strong> –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –æ–±–º–µ–Ω—è—Ç—å 
                <strong>{{ offer.ad_sender_id.title }}</strong> –Ω–∞ 
                <strong>{{ offer.ad_receiver_id.title }}</strong>
                ‚Äî –°—Ç–∞—Ç—É—Å: {{ offer.get_status_display }}
                {% if offer.status == 'WAIT' %}
                  <a href="{% url 'barter:accept_offer' offer.id %}">–ü—Ä–∏–Ω—è—Ç—å</a>
                  <a href="{% url 'barter:reject_offer' offer.id %}">–û—Ç–∫–ª–æ–Ω–∏—Ç—å</a>
                {% endif %}
              </li>
            {% empty %}
              <li>–ù–µ—Ç –≤—Ö–æ–¥—è—â–∏—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π</li>
            {% endfor %}
          </ul>
        
        </div>
    </div>
</div>


{% endblock %}